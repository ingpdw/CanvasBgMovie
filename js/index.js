!function(i){function t(s){if(e[s])return e[s].exports;var o=e[s]={exports:{},id:s,loaded:!1};return i[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=i,t.c=e,t.p="",t(0)}([function(i,t,e){i.exports=e(1)},function(i,t,e){"use strict";function s(i){return i&&i.__esModule?i:{default:i}}var o=e(2),n=s(o);!function(){window.ui||(window.ui={}),window.CanvasBgMovie||(window.CanvasBgMovie=n.default)}()},function(i,t){"use strict";function e(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function i(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}return function(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}}(),o=function(){function i(t,s){e(this,i),this.$parent=t,this.options={framesPerSecond:25,hideVideo:!0,autoplay:!0,loop:!0,fixedTop:!1,movieWidth:960,movieHeight:540,movieUrl:"",poster:""},jQuery.extend(!0,this.options,s),this.videoNode=jQuery(this.tmplVideo()),this.canvasNode=jQuery(this.tmplCanvas()),this.$parent.append(this.videoNode),this.video=this.videoNode.get(0),this.$parent.append(this.canvasNode),this.canvas=this.canvasNode.get(0),this.ctx=this.canvas.getContext("2d"),this.playing=!1,this.resizeTimeoutReference=!1,this.resizeTimout=100,this.init(),this.bind(),this.isIOS()||this.canvasNode.hide()}return s(i,[{key:"isIOS",value:function(){return/iPad|iPhone|iPod/.test(navigator.platform)}},{key:"position",value:function(){var i=this.width,t=this.height,e=jQuery(window).width(),s=jQuery(window).height(),o=-(i-e)/2,n=-(t-s)/2;this.options.fixedTop&&(n=0),this.isIOS()?this.canvasNode.css({position:"absolute",left:o,top:n}):this.videoNode.css({position:"absolute",left:o,top:n})}},{key:"init",value:function(){this.video.load(),this.setCanvasSize(),this.position(),this.isIOS()&&this.options.hideVideo&&this.videoNode.hide()}},{key:"bind",value:function(){var i=this;this.isIOS()&&(this.video.addEventListener("timeupdate",function(){i.drawFrame()}),this.video.addEventListener("canplay",function(){i.drawFrame()}),this.video.readyState>=2&&this.drawFrame()),this.isIOS()&&this.options.autoplay&&this.play(),jQuery(window).on("resize",function(){i.setCanvasSize(),i.position(),i.isIOS()&&i.drawFrame()}),jQuery(document).bind("webkitvisibilitychange",function(){window._checkVisibilityChange&&(document.webkitHidden?this.pause():this.play())})}},{key:"setCanvasSize",value:function(){var i=this.options.movieWidth,t=this.options.movieHeight,e=jQuery(window).width(),s=jQuery(window).height();this.height=Math.ceil(s),this.width=Math.ceil(this.height*i/t),this.width<e&&(this.height=Math.ceil(s+9*(e-this.width)/16),this.width=Math.ceil(this.height*i/t)),this.isIOS()?(this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.canvasNode.attr("width",this.width),this.canvasNode.attr("height",this.height)):(this.videoNode.width(this.width),this.videoNode.height(this.height))}},{key:"play",value:function(){this.isIOS()?(this.lastTime=Date.now(),this.playing=!0,this.loop()):(this.playing=!0,this.videoNode.get(0).play())}},{key:"pause",value:function(){this.isIOS()?this.playing=!1:(this.playing=!1,this.videoNode.get(0).pause())}},{key:"playPause",value:function(){this.playing?this.pause():this.play()}},{key:"loop",value:function(){var i=this,t=Date.now(),e=(t-this.lastTime)/1e3;e>=1/this.options.framesPerSecond&&(this.video.currentTime=this.video.currentTime+e,this.lastTime=t),this.video.currentTime>=this.video.duration&&(this.playing=!1,this.options.loop===!0&&(this.video.currentTime=0,this.play())),this.playing?this.animationFrame=requestAnimationFrame(function(){i.loop()}):cancelAnimationFrame(this.animationFrame)}},{key:"tmplVideo",value:function(){return'<video class="video" muted="true" loop="true" autoplay="true" poster="'+this.options.poster+'">\n\t\t\t<source src="'+this.options.movieUrl+'" type="video/mp4"></video>'}},{key:"tmplCanvas",value:function(){return'<canvas class="canvas"></canvas>'}},{key:"drawFrame",value:function(){this.ctx.drawImage(this.video,0,0,this.width,this.height)}}]),i}();i.exports=o}]);
//# sourceMappingURL=index.js.map